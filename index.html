<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>九上期末英语复习小测验</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .container {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            padding: 30px;
            margin-bottom: 30px;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid #4a6ee0;
        }
        
        h1 {
            color: #2c3e50;
            font-size: 2.4rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }
        
        .unit-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        .unit-btn {
            padding: 12px 24px;
            background-color: #e8f0fe;
            border: 2px solid #d1e3ff;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            color: #3c6de0;
            transition: all 0.3s ease;
        }
        
        .unit-btn:hover {
            background-color: #d1e3ff;
            transform: translateY(-2px);
        }
        
        .unit-btn.active {
            background-color: #4a6ee0;
            color: white;
            border-color: #4a6ee0;
        }
        
        .quiz-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .quiz-section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .section-title {
            color: #2c3e50;
            font-size: 1.8rem;
            margin: 30px 0 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .question-container {
            margin-bottom: 25px;
            padding: 20px;
            border-radius: 10px;
            background-color: #f9fafc;
            border-left: 4px solid #4a6ee0;
        }
        
        .question-number {
            display: inline-block;
            background-color: #4a6ee0;
            color: white;
            width: 28px;
            height: 28px;
            text-align: center;
            line-height: 28px;
            border-radius: 50%;
            margin-right: 10px;
            font-weight: bold;
        }
        
        .question-text {
            font-weight: 600;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .options {
            display: grid;
            gap: 10px;
            margin-top: 15px;
        }
        
        .option {
            padding: 12px 15px;
            background-color: white;
            border: 2px solid #e1e5eb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .option:hover {
            border-color: #a8c6ff;
            background-color: #f0f5ff;
        }
        
        .option.selected {
            border-color: #4a6ee0;
            background-color: #e8f0fe;
        }
        
        .option.correct {
            border-color: #2ecc71;
            background-color: #e8f7ef;
        }
        
        .option.incorrect {
            border-color: #e74c3c;
            background-color: #fdedec;
        }
        
        .fill-blank {
            margin: 15px 0;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 6px;
        }
        
        .blank-input {
            width: 120px;
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            margin: 0 5px;
            font-size: 1rem;
        }
        
        .blank-input:focus {
            border-color: #4a6ee0;
            outline: none;
        }
        
        .blank-input.correct {
            border-color: #2ecc71;
            background-color: #e8f7ef;
        }
        
        .blank-input.incorrect {
            border-color: #e74c3c;
            background-color: #fdedec;
        }
        
        .sentence-completion {
            margin: 15px 0;
        }
        
        .sentence-text {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .sentence-input {
            width: 100%;
            max-width: 600px;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            margin-top: 5px;
        }
        
        .sentence-input:focus {
            border-color: #4a6ee0;
            outline: none;
        }
        
        .sentence-input.correct {
            border-color: #2ecc71;
            background-color: #e8f7ef;
        }
        
        .sentence-input.incorrect {
            border-color: #e74c3c;
            background-color: #fdedec;
        }
        
        .button-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 40px 0;
        }
        
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background-color: #4a6ee0;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #3a5ed0;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(74, 110, 224, 0.3);
        }
        
        .btn-secondary {
            background-color: #f8f9fa;
            color: #495057;
            border: 2px solid #e1e5eb;
        }
        
        .btn-secondary:hover {
            background-color: #e9ecef;
        }
        
        .result-container {
            text-align: center;
            padding: 30px;
            background-color: #f0f5ff;
            border-radius: 12px;
            margin-top: 40px;
            display: none;
        }
        
        .result-container.show {
            display: block;
        }
        
        .score {
            font-size: 3rem;
            font-weight: bold;
            color: #4a6ee0;
            margin: 20px 0;
        }
        
        .feedback {
            font-size: 1.2rem;
            color: #2c3e50;
            margin-bottom: 20px;
        }
        
        .answer-key {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            text-align: left;
        }
        
        .answer-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        .answer-item {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px dashed #eee;
        }
        
        .instructions {
            background-color: #e8f0fe;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            border-left: 5px solid #4a6ee0;
        }
        
        .instructions h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .unit-selector {
                gap: 8px;
            }
            
            .unit-btn {
                padding: 10px 16px;
                font-size: 0.9rem;
            }
            
            .button-container {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>九年级上册期末英语复习小测验</h1>
            <p class="subtitle">涵盖U1-U8所有单元知识点，包含语法选择、语篇填词和完成句子</p>
        </header>
        
        <div class="instructions">
            <h3>使用说明</h3>
            <p>1. 点击上方单元按钮选择要复习的单元内容</p>
            <p>2. 完成所有题目后点击"提交答案"查看得分</p>
            <p>3. 可以随时点击"查看答案"核对正确答案</p>
            <p>4. 每个单元独立计分，可以重复练习</p>
        </div>
        
        <div class="unit-selector" id="unitSelector">
            <!-- 单元按钮将通过JavaScript动态生成 -->
        </div>
        
        <!-- 各单元测验内容将通过JavaScript动态生成 -->
        <div id="quizContainer"></div>
        
        <div class="button-container">
            <button class="btn btn-primary" id="submitBtn">提交答案</button>
            <button class="btn btn-secondary" id="resetBtn">重新开始</button>
            <button class="btn btn-secondary" id="showAnswersBtn">查看答案</button>
        </div>
        
        <div class="result-container" id="resultContainer">
            <h2>测验结果</h2>
            <div class="score" id="scoreDisplay">0/0</div>
            <div class="feedback" id="feedbackText"></div>
            
            <div class="answer-key" id="answerKey">
                <div class="answer-title">正确答案</div>
                <!-- 答案将通过JavaScript动态生成 -->
            </div>
        </div>
    </div>
    
    <footer>
        <p>九年级上册英语期末复习系统 &copy; 2023</p>
        <p>本系统涵盖U1-U8所有单元知识点复习</p>
    </footer>

    <script>
        // 测验数据
        const quizData = {
            "U1": {
                title: "Unit 1 期末复习小测",
                grammar: {
                    passage: "During the middle school years, students begin to think more about the world and themselves. Middle school is [1] important stage for students to develop creativity. [2] traditional teaching often focuses on exams, many educators still believe [3] students' creative thinking should also be developed. In a middle school in Guangzhou, teachers [4] special courses so far. For example, in art classes, students aren't limited to drawing on paper. Instead, they are encouraged to use [5] materials like recycled plastic bottles to create works of art.",
                    questions: [
                        {
                            number: 1,
                            options: ["A. a", "B. an", "C. the", "D. /"],
                            correct: 1
                        },
                        {
                            number: 2,
                            options: ["A. Although", "B. Unless", "C. However", "D. Until"],
                            correct: 0
                        },
                        {
                            number: 3,
                            options: ["A. what", "B. whether", "C. that", "D. why"],
                            correct: 2
                        },
                        {
                            number: 4,
                            options: ["A. designed", "B. have designed", "C. had designed", "D. will design"],
                            correct: 1
                        },
                        {
                            number: 5,
                            options: ["A. others", "B. other", "C. the other", "D. another"],
                            correct: 1
                        }
                    ]
                },
                fillBlank: {
                    passage: "Have you ever tried to bring a place back to life? Last month, the park near my home list its life: brown grass, dry flowers and a dirty fountain（喷泉）. My friends and I decided to 6. s______ the problem. At first, some neighbors 7. d_________ whether kids could really fix things. 'You're too young!' they said. But we felt 8. c_________ about our plan. We cleaned the fountain and planted seeds in the park. Slowly, green spread and flowers were everywhere! One morning, a little girl laughed as she ran after a butterfly. I realized this was 9. r_________ happiness--not just a pretty park, but a place where everyone felt connected. Now, every weekend, more kids join us. Our hearts are 10. f_________ with pride when we see families picnicking or dogs running on grass.",
                    answers: ["solve", "doubted", "confident", "real", "filled"]
                },
                sentenceCompletion: [
                    {
                        chinese: "她对结果不满意，但很快就接受了。",
                        english: "She _________ _________ _________ _________ the result but soon she accepted it.",
                        answer: "was not satisfied with"
                    },
                    {
                        chinese: "他们在校运会上赢了尽可能多的奖。",
                        english: "They won _________ _________ _________ _________ they could at the school sports meeting.",
                        answer: "as many awards as"
                    },
                    {
                        chinese: "几年之后，警察抓到了他，他被关进了监狱。",
                        english: "The police caught him a few years later, and he _________ _________ _________ _________.",
                        answer: "was put into prison"
                    },
                    {
                        chinese: "就在此时，司马光径直走向水缸，尽全力用石头砸向水缸。",
                        english: "Just then, Sima Guang _________ _________ _________ the water tank and tried to hit it with a stone.",
                        answer: "went straight to"
                    },
                    {
                        chinese: "司马光多么勇敢啊，难道不是吗？",
                        english: "_________ _________ Sima Guang is, _________ _________?",
                        answer: "How brave, isn't he"
                    }
                ]
            },
            "U2": {
                title: "Unit 2 期末复习小测",
                grammar: {
                    passage: "Confucius is one of the greatest ancient [1] in China. He was born in the Kingdom of Lu, now in Shandong Province, on 551 BC September 28th. When he was three, his father [2] away, so he could only live with his mother. Their life was very hard [3] they were poor. When he was a teenager, he started to learn music and [4] subjects. He became a teacher when he was thirty and he had his school. He taught about three [5] students in his lifetime. He thought everyone should have a chance to get an education. His most important thoughts are kindness and good manners.",
                    questions: [
                        {
                            number: 1,
                            options: ["A. mind", "B. minding", "C. minds", "D. minded"],
                            correct: 2
                        },
                        {
                            number: 2,
                            options: ["A. pass", "B. passed", "C. passes", "D. passing"],
                            correct: 1
                        },
                        {
                            number: 3,
                            options: ["A. so", "B. but", "C. because", "D. if"],
                            correct: 2
                        },
                        {
                            number: 4,
                            options: ["A. another", "B. others", "C. the other", "D. other"],
                            correct: 3
                        },
                        {
                            number: 5,
                            options: ["A. thousand", "B. thousands", "C. thousand of", "D. thousands of"],
                            correct: 0
                        }
                    ]
                },
                fillBlank: {
                    passage: "Chinese paper-cutting is a traditional art that requires patience and creativity. To achieve a perfect design, artists must follow the patterns 6.e , playing attention to every details. By practising carefully, they can 7.r mistakes and improve their skills over time. At school, some skilled artists will be invited to give 8.l about this traditional art form to students. Many artists 9.c this art not just a craft, but a way to express culture and wishes as paper-cuttings are often used in festivals and celebrations to bring good luck and happiness. Paper-cutting is also a relaxing hobby that brings 10.p to many. With practice, anyone can learn this skill and experience the joy of creating art.",
                    answers: ["exactly", "reduce", "lectures", "consider", "pleasure"]
                },
                sentenceCompletion: [
                    {
                        chinese: "他轻而易举地通过了选拔赛。",
                        english: "He passed the trial _________.",
                        answer: "with ease"
                    },
                    {
                        chinese: "李明想出了更多的主意帮助那些处于困境的人。",
                        english: "Li Ming _________ more ides to help those people _________.",
                        answer: "came up with, in trouble"
                    },
                    {
                        chinese: "托尼想在学校表现好以至于他父母不会失望。",
                        english: "Tony wants to behave well at school _________ he won't _________ his parents _________.",
                        answer: "so that, let, down"
                    },
                    {
                        chinese: "杰克很认真听他当时在说什么。",
                        english: "Jack listened carefully to _________ at that time.",
                        answer: "what he was saying"
                    },
                    {
                        chinese: "我丝毫不知道你会参加今晚的会议。",
                        english: "I _________ you will _________ the meeting tonight.",
                        answer: "have no idea, attend"
                    }
                ]
            },
            "U3": {
                title: "Unit 3 期末复习小测",
                grammar: {
                    passage: "Lang Lang, born in Shenyang in 1982, began to play the piano [1] he was 3. From 1987 to 1995, he took part in a lot of piano competitions and [2] all the first prizes. In 1996, Lang went to America [3] his study. At the age of 18, he began to show his unusual talent for music. In 2005, he [4] to have a concert at the White House. Lang has become one of today's [5] pianists in the world, and is named as 'a young people changing the world'.",
                    questions: [
                        {
                            number: 1,
                            options: ["A. after", "B. before", "C. when", "D. until"],
                            correct: 2
                        },
                        {
                            number: 2,
                            options: ["A. win", "B. won", "C. wins", "D. wining"],
                            correct: 1
                        },
                        {
                            number: 3,
                            options: ["A. to continue", "B. continue", "C. continues", "D. continued"],
                            correct: 0
                        },
                        {
                            number: 4,
                            options: ["A. invite", "B. was invited", "C. invited", "D. is invited"],
                            correct: 1
                        },
                        {
                            number: 5,
                            options: ["A. more outstanding", "B. most outstanding", "C. outstanding", "D. outstandingly"],
                            correct: 1
                        }
                    ]
                },
                fillBlank: {
                    passage: "Mother's Day is coming this weekend. My mother is always busy with her work as well as the housework in our home. She is so busy that she has no time to do her 6.p things. Therefore, I make a 7.d to do something for her. First, I want to send her a gift to make her happy. Second, I want to cook a 8.m for her. Third, I would like to 9.i her to see a movie. My mother is really a great woman who has done a lot of things for us. I am so lucky to be her 10.d . In my mind, my mother is the best mother in the world.",
                    answers: ["personal", "decision", "meal", "invite", "daughter"]
                },
                sentenceCompletion: [
                    {
                        chinese: "我弟弟对体育运动没兴趣，所以很少去户外玩。",
                        english: "My brother _________ sports. So he rarely plays outdoors.",
                        answer: "has no interest in"
                    },
                    {
                        chinese: "丽莎主动提出帮忙打扫房间。",
                        english: "Lisa _________ the cleaning of the room.",
                        answer: "offered to help with"
                    },
                    {
                        chinese: "通常，玛丽步行去学校要花半个小时。",
                        english: "_________ usually _________ Mary half an hour to school on foot.",
                        answer: "It, takes"
                    },
                    {
                        chinese: "查理.卓别林是一个多么伟大的演员啊！",
                        english: "_________ actor Charlie Chaplin was!",
                        answer: "What a great"
                    },
                    {
                        chinese: "托尼太累了以至于他不想和别人说话。",
                        english: "Tony _________ he didn't want to talk to others.",
                        answer: "was so tired that"
                    }
                ]
            },
            "U4": {
                title: "Unit 4 期末复习小测",
                grammar: {
                    passage: "Dear Miss Wang, I'm writing to ask for your advice. I have [1] big problem with my English study. I [2] good at English, but since last term, my listening score [3] a lot. Every time I take a listening test, I can't catch what the speakers say quickly enough. I want [4] my listening skills, but I don't know how to start. Also, I'm afraid of asking my teacher for help because I think she might think I'm not hard-working. Could you tell me [5] I can do to make progress in a short time? I would be very grateful for your help. Yours sincerely, Zhang Hua",
                    questions: [
                        {
                            number: 1,
                            options: ["A. a", "B. an", "C. the", "D. /"],
                            correct: 0
                        },
                        {
                            number: 2,
                            options: ["A. use to be", "B. used to be", "C. use to being", "D. used to being"],
                            correct: 1
                        },
                        {
                            number: 3,
                            options: ["A. drops", "B. dropped", "C. has dropped", "D. will drop"],
                            correct: 2
                        },
                        {
                            number: 4,
                            options: ["A. to improving", "B. improving", "C. improve", "D. to improve"],
                            correct: 3
                        },
                        {
                            number: 5,
                            options: ["A. that", "B. which", "C. what", "D. who"],
                            correct: 2
                        }
                    ]
                },
                fillBlank: {
                    passage: "Last week, my classmate Tom 6. f_________ his math test because of some silly mistakes. He forgot to check answers and messed up simple calculations. His teacher 7. s_________ he should make a study plan and be more focused, but Tom ignored(忽略) it at first. What's more, he wasn't 8. p_________ when classmates tried to help him. Later, he realized 9. n_________ of his excuses worked. He finally followed the advice: reviewing lessons carefully and asking for help politely. Now his grades are improving. This tells us that when facing problems, we shouldn't be 10. c_________ or proud. Accepting useful advice helps us correct mistakes.",
                    answers: ["failed", "suggested", "polite", "none", "careless"]
                },
                sentenceCompletion: [
                    {
                        chinese: "在众目睽睽之下，我因为这个愚蠢的错误被嘲笑。",
                        english: "Right in front of everyone, I _________ _________ _________ for my silly mistake.",
                        answer: "was laughed at"
                    },
                    {
                        chinese: "那一刻我感到多么难堪啊！",
                        english: "_________ _________ _________ _________ at that moment!",
                        answer: "How embarrassed I felt"
                    },
                    {
                        chinese: "我深深为自己的行为感到羞愧。",
                        english: "I deeply _________ _________ _________ what I did.",
                        answer: "feel ashamed of"
                    },
                    {
                        chinese: "你要是做饭的话，拜托别弄得一团糟。",
                        english: "If you cook, please _________ _________ _________ _________ _________.",
                        answer: "don't make a mess"
                    },
                    {
                        chinese: "我把他的行为告诉了我的父母，但他们说这与我无关。",
                        english: "I told my parents about his behavior, but they said it _________ _________ _________ _________ _________.",
                        answer: "was none of my business"
                    }
                ]
            },
            "U5": {
                title: "Unit 5 期末复习小测",
                grammar: {
                    passage: "Lyu Yanting, 37, [1] voice actor of little Nezha in Ne Zha 2, uses her voice to vividly show a great character who fights against fate (命运). 'Dubbing is very similar to acting,' said Lyu. The script will [2] to voice actors before they start. After reading it, they will have [3] own understanding of the stories and characters. During the dubbing process, Lyu needs to show the character's feelings. Also, she has to match her voice [4] with the cartoon's scenes. 'The director is also very important. He will explain the story and scenes on set. With his guidance, we work together [5] our best performance.'",
                    questions: [
                        {
                            number: 1,
                            options: ["A. a", "B. an", "C. the", "D. /"],
                            correct: 2
                        },
                        {
                            number: 2,
                            options: ["A. be given", "B. give", "C. giving", "D. have given"],
                            correct: 0
                        },
                        {
                            number: 3,
                            options: ["A. they", "B. them", "C. their", "D. theirs"],
                            correct: 2
                        },
                        {
                            number: 4,
                            options: ["A. perfect", "B. perfectly", "C. perfection", "D. perfectionist"],
                            correct: 1
                        },
                        {
                            number: 5,
                            options: ["A. show", "B. showed", "C. to show", "D. shown"],
                            correct: 2
                        }
                    ]
                },
                fillBlank: {
                    passage: "Yesterday, I was 6. l_________ enough to join in a quiz show about films. When I arrived, the 7. d_________ was busy giving instructions(指令). He was making sure everything went well. The show had a wonderful script, full of interesting knowledge about the latest movies. There were many contestants on the show. They all looked forward to winning the competition. Some of them were really nervous at first, but as the show went on, they became more 8. r_________. One boy was really excellent. He answered almost all the questions correctly and finally beat the others. Everyone gave him a lot of 9. p_________. His 10. v_________ made the whole studio full of excitement.",
                    answers: ["lucky", "director", "relaxed", "praise", "victory"]
                },
                sentenceCompletion: [
                    {
                        chinese: "我们坐在电视前观看达人秀，一动不动。",
                        english: "We sat in front of the TV to watch a _________ _________ and_________ _________.",
                        answer: "talent show, didn't move"
                    },
                    {
                        chinese: "玛丽很快就领先汤姆6分。",
                        english: "Mary _________ soon 6 points _________ _________ Tom.",
                        answer: "took, ahead of"
                    },
                    {
                        chinese: "我们迫不及待想要知道接下来会发生什么。",
                        english: "We couldn't wait to find out _________ _________ _________ next.",
                        answer: "what would happen"
                    },
                    {
                        chinese: "最后，汤姆被玛丽打败了。",
                        english: "In the end, Tom _________ _________ by Mary.",
                        answer: "was beaten"
                    },
                    {
                        chinese: "对玛丽来说这是多么好的消息啊！",
                        english: "_________ _________ _________ _________ is for Mary!",
                        answer: "What good news it"
                    }
                ]
            },
            "U6": {
                title: "Unit 6 期末复习小测",
                grammar: {
                    passage: "The most famous artist in Langzhong is Wang Biao. His family members [1] shadow puppetry for over 350 years. However, by the 1990s, the art became less popular. Wang had to find other jobs, [2] he never forgot his passion for shadow puppetry. Later, with help from [3] shadow puppet collector, he moved to Chengdu and started a puppet troupe(演出团). The troupe put on plays in parks and schools, making the art popular again. Wang always remembers [4] his grandfather told him--not to let shadow puppetry [5] with his generation.",
                    questions: [
                        {
                            number: 1,
                            options: ["A. practise", "B. practised", "C. have practised", "D. will practise"],
                            correct: 2
                        },
                        {
                            number: 2,
                            options: ["A. so", "B. but", "C. unless", "D. and"],
                            correct: 1
                        },
                        {
                            number: 3,
                            options: ["A. a", "B. an", "C. the", "D. /"],
                            correct: 0
                        },
                        {
                            number: 4,
                            options: ["A. which", "B. why", "C. how", "D. what"],
                            correct: 3
                        },
                        {
                            number: 5,
                            options: ["A. ends", "B. end", "C. ending", "D. to end"],
                            correct: 1
                        }
                    ]
                },
                fillBlank: {
                    passage: "Mr. Green runs a tiny food shop in our neighborhood. Every morning, he does some 6. r_________ on what people in the area like to eat most. He firmly believes that fresh and good-quality ingredients are 7. n_________ to make tasty food that people will enjoy. At lunchtime, the shop is always busy. Lots of 8. c_________ come in to grab a quick and delicious meal. Mr. Green always smiles and 9. s_________ them with great care and kindness. His most popular product is a tasty food with meat and vegetables between two pieces of bread---it's a 10. s_________ that everyone raves about. It's cheap and satisfying, making his small shop a favorite spot for many.",
                    answers: ["research", "necessary", "customers", "serves", "sandwich"]
                },
                sentenceCompletion: [
                    {
                        chinese: "大部分孩子喜欢吃油炸食物和喝软饮料。",
                        english: "Most kids like eating _________ _________ and drinking _________ _________.",
                        answer: "fried food, soft drinks"
                    },
                    {
                        chinese: "为了减肥，我决定远离过多的糖和油。",
                        english: "To _________ _________, I decide to _________ _________ _________ too much sugar and oil.",
                        answer: "lose weight, stay away from"
                    },
                    {
                        chinese: "通常，我的父母每年都会安排一次体检。",
                        english: "_________, my parents have a _________ _________ every year.",
                        answer: "Usually, health check-up"
                    },
                    {
                        chinese: "你知道我考完试要给自己买什么吗？",
                        english: "Do you know _________ _________ _________ _________ _________ after the exam?",
                        answer: "what I will buy myself"
                    },
                    {
                        chinese: "我妈妈从商店买了大量的乳制品。",
                        english: "My mother bought_________ _________ _________ _________ from the store.",
                        answer: "a lot of dairy products"
                    }
                ]
            },
            "U7": {
                title: "Unit 7 期末复习小测",
                grammar: {
                    passage: "One afternoon, I sat by a lake watching an old man [1] was fishing quietly for hours. yet he never seemed [2]. 'Why do you like fishing so much?' I asked. He smiled and said, 'Fishing teaches me patience.'I nodded, not fully understanding. Then he told me a story. 'Years ago, I was a young man full of [3]. I hurried through life and always [4] about what I didn't have. One day, a friend took me fishing. 'Sit and watch the water,' he said. When I waited, I noticed the sun shining on the lake, and a bird flew across the sky [5].",
                    questions: [
                        {
                            number: 1,
                            options: ["A. who", "B. which", "C. where", "D. when"],
                            correct: 0
                        },
                        {
                            number: 2,
                            options: ["A. boring", "B. bored", "C. boringly", "D. boredly"],
                            correct: 1
                        },
                        {
                            number: 3,
                            options: ["A. angry", "B. angrily", "C. anger", "D. angering"],
                            correct: 2
                        },
                        {
                            number: 4,
                            options: ["A. complains", "B. complaining", "C. complain", "D. complained"],
                            correct: 3
                        },
                        {
                            number: 5,
                            options: ["A. slowly", "B. slower", "C. slow", "D. more slowly"],
                            correct: 0
                        }
                    ]
                },
                fillBlank: {
                    passage: "Lily has always wanted to be one of the most famous 6.w_________ in the world. She loves writing and hopes to write a wonderful 7.n_________ one day. Last week, her class had a story-writing activity. Lily finished her story fast but wasn't 8.c_________ with it. After the teacher read all works, Lily found her story had small mistakes. It was a real 9.p_________ that she missed the chance to get praise. Her deskmate told her to 10.p_________ nothing happened, but Lily decided to do better next time. Now, she always checks her writing slowly. Lily believes she can finish her works perfectly someday.",
                    answers: ["writers", "novel", "content", "pity", "pretend"]
                },
                sentenceCompletion: [
                    {
                        chinese: "学习了两个小时后，露西感到疲惫，就在那棵大树下休息了一下。",
                        english: "After studying for two hours, Lucy felt tired and _________ _________ _________ under the big tree.",
                        answer: "had a rest"
                    },
                    {
                        chinese: "她们过去常坐的那张旧长椅，仍然在公园里。",
                        english: "The old bench _________ they _________ _________ sit on is still in the park.",
                        answer: "where, used to"
                    },
                    {
                        chinese: "Jerry对这场冒险越来越感兴趣。",
                        english: "Jerry is _________ _________ _________ _________ in this _________.",
                        answer: "more and more interested, adventure"
                    },
                    {
                        chinese: "能拥有如此美好的回忆，她们多么幸运啊！",
                        english: "_________ _________ they are to have such wonderful memories!",
                        answer: "How lucky"
                    },
                    {
                        chinese: "突然，她意识到她非常想念她最好的朋友莉莉。",
                        english: "Suddenly, she realized _________ _________ _________ her best friend Lily so much.",
                        answer: "how much she missed"
                    }
                ]
            },
            "U8": {
                title: "Unit 8 期末复习小测",
                grammar: {
                    passage: "Last month, I decided to change my eating habits after a talk with my doctor [1] I respect deeply. She explained to me the importance of a balanced diet. One morning, I prepared a fresh vegetable salad for breakfast. '[2] useful suggestion the doctor gave me!' I thought happily. I realized [3] a healthy breakfast is very important. My doctor told me that this eating pattern [4] by nutrition experts. Now, I feel much more energetic and satisfied [5] my new lifestyle. I truly understand that a healthy diet is not about strict rules, but about consistent care for our body.",
                    questions: [
                        {
                            number: 1,
                            options: ["A. what", "B. whose", "C. who", "D. which"],
                            correct: 2
                        },
                        {
                            number: 2,
                            options: ["A. What", "B. What a", "C. How", "D. How a"],
                            correct: 1
                        },
                        {
                            number: 3,
                            options: ["A. that", "B. if", "C. why", "D. what"],
                            correct: 0
                        },
                        {
                            number: 4,
                            options: ["A. has been advised", "B. was advised", "C. is advised", "D. advised"],
                            correct: 2
                        },
                        {
                            number: 5,
                            options: ["A. with", "B. for", "C. to", "D. of"],
                            correct: 0
                        }
                    ]
                },
                fillBlank: {
                    passage: "Lisa had been looking forward to giving her favorite teacher a special 6. g_________ on the school's anniversary. She 2. c_________ every penny of her pocket money at that time, hoping to buy the handwritten book the teacher mentioned once---but still could not 3. a_________ it. So she spent weeks writing a heartfelt note, full of stories about how the teacher inspired her. On the day of the 4. g_________ ceremony, she nervously handed the note to the teacher. To her surprise, the teacher smiled, then 5. d_________ a gift box from her bag---inside was the exact book she wanted! 'This is for your sincerity,' the teacher said. This warm ending made Lisa realize that the best gifts always come with mutual care.",
                    answers: ["gift", "collected", "afford", "graduation", "drew"]
                },
                sentenceCompletion: [
                    {
                        chinese: "她以雷锋的名字捐钱给一些学校。",
                        english: "She donated money to some schools _________ _________ _________ _________ Lei Feng.",
                        answer: "in the name of"
                    },
                    {
                        chinese: "Doris 为了完成自己的梦想努力赚钱。",
                        english: "Doris worked hard _________ _________ _________ to fulfil her dream.",
                        answer: "to earn money"
                    },
                    {
                        chinese: "最终，她承认了错误并把零食递给了老师。",
                        english: "_________, she admitted her mistake and _________ _________ the snacks to teacher.",
                        answer: "Finally, handed over"
                    },
                    {
                        chinese: "突然，他的目光注视到沙发底下一个发光的物体。",
                        english: "Suddenly, his eyes _________ _________ _________ a shiny object under the sofa.",
                        answer: "were fixed on"
                    },
                    {
                        chinese: "Tom满屋子地找他那只丢失的手表。",
                        english: "Tom _________ _________ his lost watch everywhere in the house.",
                        answer: "searched for"
                    }
                ]
            }
        };

        // 当前选中的单元
        let currentUnit = "U1";
        
        // 用户答案存储
        let userAnswers = {};
        
        // 初始化函数
        function init() {
            // 生成单元选择按钮
            const unitSelector = document.getElementById('unitSelector');
            Object.keys(quizData).forEach(unit => {
                const button = document.createElement('button');
                button.className = 'unit-btn';
                button.textContent = quizData[unit].title;
                button.dataset.unit = unit;
                button.addEventListener('click', () => switchUnit(unit));
                unitSelector.appendChild(button);
            });
            
            // 设置默认激活按钮
            document.querySelector(`.unit-btn[data-unit="${currentUnit}"]`).classList.add('active');
            
            // 生成第一个单元的测验内容
            generateQuizContent(currentUnit);
            
            // 添加事件监听器
            document.getElementById('submitBtn').addEventListener('click', submitQuiz);
            document.getElementById('resetBtn').addEventListener('click', resetQuiz);
            document.getElementById('showAnswersBtn').addEventListener('click', showAnswers);
            
            // 初始化用户答案存储
            resetUserAnswers();
        }
        
        // 切换单元
        function switchUnit(unit) {
            // 更新当前单元
            currentUnit = unit;
            
            // 更新按钮状态
            document.querySelectorAll('.unit-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.unit-btn[data-unit="${unit}"]`).classList.add('active');
            
            // 生成新单元的测验内容
            generateQuizContent(unit);
            
            // 隐藏结果
            document.getElementById('resultContainer').classList.remove('show');
        }
        
        // 生成测验内容
        function generateQuizContent(unit) {
            const quiz = quizData[unit];
            const container = document.getElementById('quizContainer');
            
            // 清空容器
            container.innerHTML = '';
            
            // 创建语法选择部分
            const grammarSection = document.createElement('div');
            grammarSection.className = 'quiz-section active';
            grammarSection.innerHTML = `
                <h2 class="section-title">一、语法选择</h2>
                <div class="question-container">
                    <div class="question-text">${quiz.grammar.passage}</div>
                    <div class="options" id="grammarOptions"></div>
                </div>
            `;
            container.appendChild(grammarSection);
            
            // 生成语法选择题选项
            const grammarOptionsContainer = grammarSection.querySelector('#grammarOptions');
            quiz.grammar.questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-container';
                questionDiv.innerHTML = `
                    <div><span class="question-number">${question.number}</span>${question.options.map((option, optIndex) => 
                        `<div class="option" data-question="${index}" data-option="${optIndex}">${option}</div>`
                    ).join('')}</div>
                `;
                grammarOptionsContainer.appendChild(questionDiv);
                
                // 添加选项点击事件
                questionDiv.querySelectorAll('.option').forEach(option => {
                    option.addEventListener('click', function() {
                        const questionIndex = parseInt(this.dataset.question);
                        const optionIndex = parseInt(this.dataset.option);
                        
                        // 移除同一问题的其他选项的选中状态
                        this.parentElement.querySelectorAll('.option').forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        
                        // 添加选中状态
                        this.classList.add('selected');
                        
                        // 保存用户答案
                        userAnswers[unit].grammar[questionIndex] = optionIndex;
                    });
                });
            });
            
            // 创建语篇填词部分
            const fillBlankSection = document.createElement('div');
            fillBlankSection.className = 'quiz-section active';
            
            // 处理填空题文本，将空白处替换为输入框
            let fillText = quiz.fillBlank.passage;
            quiz.fillBlank.answers.forEach((_, index) => {
                const blankNumber = index < 5 ? index + 6 : index - 4; // 根据题目调整编号
                fillText = fillText.replace(
                    new RegExp(`${blankNumber}\\. [a-zA-Z]_+`), 
                    `${blankNumber}. <input type="text" class="blank-input" data-blank="${index}" placeholder="输入答案">`
                );
            });
            
            fillBlankSection.innerHTML = `
                <h2 class="section-title">二、语篇填词</h2>
                <div class="question-container">
                    <div class="question-text">${fillText}</div>
                </div>
            `;
            container.appendChild(fillBlankSection);
            
            // 添加填空题输入事件
            fillBlankSection.querySelectorAll('.blank-input').forEach(input => {
                input.addEventListener('input', function() {
                    const blankIndex = parseInt(this.dataset.blank);
                    userAnswers[unit].fillBlank[blankIndex] = this.value.trim().toLowerCase();
                });
            });
            
            // 创建完成句子部分
            const sentenceSection = document.createElement('div');
            sentenceSection.className = 'quiz-section active';
            sentenceSection.innerHTML = `
                <h2 class="section-title">三、完成句子</h2>
            `;
            container.appendChild(sentenceSection);
            
            // 生成完成句子题
            quiz.sentenceCompletion.forEach((sentence, index) => {
                const sentenceDiv = document.createElement('div');
                sentenceDiv.className = 'question-container sentence-completion';
                sentenceDiv.innerHTML = `
                    <div class="question-text">
                        <div class="sentence-text">${sentence.chinese}</div>
                        <div>${sentence.english}</div>
                        <input type="text" class="sentence-input" data-sentence="${index}" placeholder="在此输入完整句子">
                    </div>
                `;
                sentenceSection.appendChild(sentenceDiv);
                
                // 添加句子题输入事件
                const input = sentenceDiv.querySelector('.sentence-input');
                input.addEventListener('input', function() {
                    const sentenceIndex = parseInt(this.dataset.sentence);
                    userAnswers[unit].sentenceCompletion[sentenceIndex] = this.value.trim();
                });
            });
        }
        
        // 重置用户答案
        function resetUserAnswers() {
            userAnswers = {};
            Object.keys(quizData).forEach(unit => {
                userAnswers[unit] = {
                    grammar: Array(quizData[unit].grammar.questions.length).fill(null),
                    fillBlank: Array(quizData[unit].fillBlank.answers.length).fill(null),
                    sentenceCompletion: Array(quizData[unit].sentenceCompletion.length).fill(null)
                };
            });
        }
        
        // 提交测验
        function submitQuiz() {
            const unit = currentUnit;
            const quiz = quizData[unit];
            let score = 0;
            let total = 0;
            let answerKeyHTML = '';
            
            // 检查语法选择题
            quiz.grammar.questions.forEach((question, index) => {
                total++;
                const userAnswer = userAnswers[unit].grammar[index];
                const isCorrect = userAnswer === question.correct;
                
                if (isCorrect) score++;
                
                // 更新选项显示
                const options = document.querySelectorAll(`.option[data-question="${index}"]`);
                options.forEach((option, optIndex) => {
                    option.classList.remove('correct', 'incorrect');
                    if (optIndex === question.correct) {
                        option.classList.add('correct');
                    } else if (optIndex === userAnswer && !isCorrect) {
                        option.classList.add('incorrect');
                    }
                });
                
                // 添加到答案键
                answerKeyHTML += `
                    <div class="answer-item">
                        <strong>语法选择 ${question.number}:</strong> 
                        正确答案: ${question.options[question.correct]} 
                        ${userAnswer !== null ? `| 您的答案: ${question.options[userAnswer]}` : '| 未作答'}
                        ${isCorrect ? '✓' : '✗'}
                    </div>
                `;
            });
            
            // 检查填空题
            quiz.fillBlank.answers.forEach((answer, index) => {
                total++;
                const userAnswer = userAnswers[unit].fillBlank[index];
                const isCorrect = userAnswer && userAnswer.toLowerCase() === answer.toLowerCase();
                
                if (isCorrect) score++;
                
                // 更新输入框显示
                const input = document.querySelector(`.blank-input[data-blank="${index}"]`);
                if (input) {
                    input.classList.remove('correct', 'incorrect');
                    if (isCorrect) {
                        input.classList.add('correct');
                    } else if (userAnswer) {
                        input.classList.add('incorrect');
                    }
                }
                
                // 添加到答案键
                answerKeyHTML += `
                    <div class="answer-item">
                        <strong>语篇填词 ${index < 5 ? index + 6 : index - 4}:</strong> 
                        正确答案: ${answer} 
                        ${userAnswer ? `| 您的答案: ${userAnswer}` : '| 未作答'}
                        ${isCorrect ? '✓' : '✗'}
                    </div>
                `;
            });
            
            // 检查完成句子题
            quiz.sentenceCompletion.forEach((sentence, index) => {
                total++;
                const userAnswer = userAnswers[unit].sentenceCompletion[index];
                // 简单判断：如果用户答案包含正确答案的关键词就认为正确
                const isCorrect = userAnswer && 
                    sentence.answer.split(' ').every(word => 
                        word.length > 2 && userAnswer.toLowerCase().includes(word.toLowerCase())
                    );
                
                if (isCorrect) score++;
                
                // 更新输入框显示
                const input = document.querySelector(`.sentence-input[data-sentence="${index}"]`);
                if (input) {
                    input.classList.remove('correct', 'incorrect');
                    if (isCorrect) {
                        input.classList.add('correct');
                    } else if (userAnswer) {
                        input.classList.add('incorrect');
                    }
                }
                
                // 添加到答案键
                answerKeyHTML += `
                    <div class="answer-item">
                        <strong>完成句子 ${index + 11}:</strong> 
                        正确答案: ${sentence.answer} 
                        ${userAnswer ? `| 您的答案: ${userAnswer}` : '| 未作答'}
                        ${isCorrect ? '✓' : '✗'}
                    </div>
                `;
            });
            
            // 显示结果
            const percentage = Math.round((score / total) * 100);
            document.getElementById('scoreDisplay').textContent = `${score}/${total}`;
            
            let feedback = '';
            if (percentage >= 90) {
                feedback = '优秀！你对这个单元的知识点掌握得很好！';
            } else if (percentage >= 70) {
                feedback = '良好！继续努力，你可以做得更好！';
            } else if (percentage >= 50) {
                feedback = '及格！需要加强对这个单元知识点的复习。';
            } else {
                feedback = '需要努力！建议重新学习这个单元的内容。';
            }
            
            document.getElementById('feedbackText').textContent = feedback;
            document.getElementById('answerKey').innerHTML = `
                <div class="answer-title">正确答案与解析</div>
                ${answerKeyHTML}
            `;
            
            document.getElementById('resultContainer').classList.add('show');
            window.scrollTo({
                top: document.getElementById('resultContainer').offsetTop - 20,
                behavior: 'smooth'
            });
        }
        
        // 重置测验
        function resetQuiz() {
            // 重置用户答案
            resetUserAnswers();
            
            // 重新生成测验内容
            generateQuizContent(currentUnit);
            
            // 隐藏结果
            document.getElementById('resultContainer').classList.remove('show');
            
            // 滚动到顶部
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // 显示答案
        function showAnswers() {
            const unit = currentUnit;
            const quiz = quizData[unit];
            
            // 显示语法选择题答案
            quiz.grammar.questions.forEach((question, index) => {
                const options = document.querySelectorAll(`.option[data-question="${index}"]`);
                options.forEach((option, optIndex) => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                    if (optIndex === question.correct) {
                        option.classList.add('correct');
                    }
                });
            });
            
            // 显示填空题答案
            quiz.fillBlank.answers.forEach((answer, index) => {
                const input = document.querySelector(`.blank-input[data-blank="${index}"]`);
                if (input) {
                    input.value = answer;
                    input.classList.add('correct');
                }
            });
            
            // 显示完成句子题答案
            quiz.sentenceCompletion.forEach((sentence, index) => {
                const input = document.querySelector(`.sentence-input[data-sentence="${index}"]`);
                if (input) {
                    input.value = sentence.answer;
                    input.classList.add('correct');
                }
            });
            
            // 更新用户答案
            quiz.grammar.questions.forEach((question, index) => {
                userAnswers[unit].grammar[index] = question.correct;
            });
            
            quiz.fillBlank.answers.forEach((answer, index) => {
                userAnswers[unit].fillBlank[index] = answer;
            });
            
            quiz.sentenceCompletion.forEach((sentence, index) => {
                userAnswers[unit].sentenceCompletion[index] = sentence.answer;
            });
            
            // 显示结果但不自动提交
            document.getElementById('resultContainer').classList.add('show');
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
